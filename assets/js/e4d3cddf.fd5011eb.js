"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[864],{75303:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"best-practices","title":"\u6700\u4f73\u5b9e\u8df5","description":"\u672c\u6587\u6863\u63d0\u4f9b\u4e86\u4f7f\u7528 JsonSage \u7684\u4e00\u4e9b\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae\u3002","source":"@site/docs/best-practices.md","sourceDirName":".","slug":"/best-practices","permalink":"/jsonsage/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/hongping1963-source/jsonsage/tree/main/website/docs/best-practices.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5}}');var a=r(74848),i=r(28453);const c={sidebar_position:5},l="\u6700\u4f73\u5b9e\u8df5",t={},d=[{value:"\u6027\u80fd\u4f18\u5316",id:"\u6027\u80fd\u4f18\u5316",level:2},{value:"\u4f7f\u7528\u6d41\u5f0f\u5904\u7406",id:"\u4f7f\u7528\u6d41\u5f0f\u5904\u7406",level:3},{value:"\u542f\u7528\u7f13\u5b58",id:"\u542f\u7528\u7f13\u5b58",level:3},{value:"\u9519\u8bef\u5904\u7406",id:"\u9519\u8bef\u5904\u7406",level:2},{value:"\u4f7f\u7528\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f",id:"\u4f7f\u7528\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f",level:3},{value:"\u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236",id:"\u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236",level:3},{value:"\u6587\u4ef6\u7ec4\u7ec7",id:"\u6587\u4ef6\u7ec4\u7ec7",level:2},{value:"\u4f7f\u7528\u6a21\u5757\u5316\u7684Schema",id:"\u4f7f\u7528\u6a21\u5757\u5316\u7684schema",level:3},{value:"\u91c7\u7528\u4e00\u81f4\u7684\u76ee\u5f55\u7ed3\u6784",id:"\u91c7\u7528\u4e00\u81f4\u7684\u76ee\u5f55\u7ed3\u6784",level:3},{value:"\u76d1\u63a7\u4e0e\u65e5\u5fd7",id:"\u76d1\u63a7\u4e0e\u65e5\u5fd7",level:2},{value:"\u5b9e\u73b0\u5168\u9762\u7684\u76d1\u63a7",id:"\u5b9e\u73b0\u5168\u9762\u7684\u76d1\u63a7",level:3},{value:"\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",id:"\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",level:3},{value:"\u5b89\u5168\u6027",id:"\u5b89\u5168\u6027",level:2},{value:"\u9a8c\u8bc1\u8f93\u5165\u6570\u636e",id:"\u9a8c\u8bc1\u8f93\u5165\u6570\u636e",level:3},{value:"\u9650\u5236\u6587\u4ef6\u5927\u5c0f",id:"\u9650\u5236\u6587\u4ef6\u5927\u5c0f",level:3},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:2},{value:"\u7f16\u5199\u5168\u9762\u7684\u6d4b\u8bd5",id:"\u7f16\u5199\u5168\u9762\u7684\u6d4b\u8bd5",level:3},{value:"\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u751f\u6210\u5668",id:"\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u751f\u6210\u5668",level:3},{value:"\u7248\u672c\u63a7\u5236",id:"\u7248\u672c\u63a7\u5236",level:2},{value:"\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c",id:"\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c",level:3},{value:"\u7ef4\u62a4\u5411\u540e\u517c\u5bb9\u6027",id:"\u7ef4\u62a4\u5411\u540e\u517c\u5bb9\u6027",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u6863\u63d0\u4f9b\u4e86\u4f7f\u7528 JsonSage \u7684\u4e00\u4e9b\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u6027\u80fd\u4f18\u5316",children:"\u6027\u80fd\u4f18\u5316"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u6d41\u5f0f\u5904\u7406",children:"\u4f7f\u7528\u6d41\u5f0f\u5904\u7406"}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e\u5927\u578bJSON\u6587\u4ef6\uff0c\u5efa\u8bae\u4f7f\u7528\u6d41\u5f0f\u5904\u7406API\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const { createJsonStream } = require('jsonsage');\r\n\r\nconst stream = createJsonStream('large-file.json');\r\nstream.on('data', chunk => {\r\n  // \u5904\u7406\u6570\u636e\u5757\r\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u542f\u7528\u7f13\u5b58",children:"\u542f\u7528\u7f13\u5b58"}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e\u9891\u7e41\u8bbf\u95ee\u7684JSON\u6587\u4ef6\uff0c\u542f\u7528\u7f13\u5b58\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u6027\u80fd\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const jsonsage = new JsonSage({\r\n  cache: {\r\n    enabled: true,\r\n    maxSize: 100 // \u7f13\u5b58\u6700\u591a100\u4e2a\u6587\u4ef6\r\n  }\r\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u9519\u8bef\u5904\u7406",children:"\u9519\u8bef\u5904\u7406"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f",children:"\u4f7f\u7528\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f"}),"\n",(0,a.jsx)(n.p,{children:"\u914d\u7f6e\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f\u53ef\u4ee5\u5e2e\u52a9\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"jsonsage.validate(data, {\r\n  detailed: true,\r\n  onError: (errors) => {\r\n    errors.forEach(error => {\r\n      console.error(`${error.path}: ${error.message}`);\r\n    });\r\n  }\r\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236",children:"\u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236"}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e\u5173\u952e\u5e94\u7528\uff0c\u5efa\u8bae\u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"jsonsage.monitor('./config', {\r\n  onError: async (error) => {\r\n    await backupService.restore();\r\n    await notificationService.alert(error);\r\n  }\r\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6587\u4ef6\u7ec4\u7ec7",children:"\u6587\u4ef6\u7ec4\u7ec7"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u6a21\u5757\u5316\u7684schema",children:"\u4f7f\u7528\u6a21\u5757\u5316\u7684Schema"}),"\n",(0,a.jsx)(n.p,{children:"\u5c06\u5927\u578bSchema\u62c6\u5206\u4e3a\u5c0f\u578b\u3001\u53ef\u91cd\u7528\u7684\u6a21\u5757\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:'// schemas/common.json\r\n{\r\n  "definitions": {\r\n    "address": {\r\n      "type": "object",\r\n      "properties": {\r\n        "street": { "type": "string" },\r\n        "city": { "type": "string" }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// schemas/user.json\r\n{\r\n  "$ref": "./common.json#/definitions/address"\r\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u91c7\u7528\u4e00\u81f4\u7684\u76ee\u5f55\u7ed3\u6784",children:"\u91c7\u7528\u4e00\u81f4\u7684\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,a.jsx)(n.p,{children:"\u5efa\u8bae\u91c7\u7528\u4ee5\u4e0b\u76ee\u5f55\u7ed3\u6784\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"project/\r\n\u251c\u2500\u2500 schemas/           # JSON Schema \u6587\u4ef6\r\n\u251c\u2500\u2500 transforms/        # \u8f6c\u6362\u89c4\u5219\r\n\u251c\u2500\u2500 validators/        # \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\r\n\u2514\u2500\u2500 data/             # JSON \u6570\u636e\u6587\u4ef6\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u76d1\u63a7\u4e0e\u65e5\u5fd7",children:"\u76d1\u63a7\u4e0e\u65e5\u5fd7"}),"\n",(0,a.jsx)(n.h3,{id:"\u5b9e\u73b0\u5168\u9762\u7684\u76d1\u63a7",children:"\u5b9e\u73b0\u5168\u9762\u7684\u76d1\u63a7"}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u91cd\u8981\u7684\u64cd\u4f5c\u8fdb\u884c\u76d1\u63a7\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"jsonsage.on('fileChange', (event) => {\r\n  metrics.recordFileChange(event);\r\n});\r\n\r\njsonsage.on('validation', (result) => {\r\n  metrics.recordValidation(result);\r\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7",children:"\u4f7f\u7528\u7ed3\u6784\u5316\u65e5\u5fd7"}),"\n",(0,a.jsx)(n.p,{children:"\u91c7\u7528\u7ed3\u6784\u5316\u7684\u65e5\u5fd7\u683c\u5f0f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"jsonsage.setLogger({\r\n  log: (level, message, meta) => {\r\n    logger.log({\r\n      level,\r\n      message,\r\n      ...meta,\r\n      timestamp: new Date()\r\n    });\r\n  }\r\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5b89\u5168\u6027",children:"\u5b89\u5168\u6027"}),"\n",(0,a.jsx)(n.h3,{id:"\u9a8c\u8bc1\u8f93\u5165\u6570\u636e",children:"\u9a8c\u8bc1\u8f93\u5165\u6570\u636e"}),"\n",(0,a.jsx)(n.p,{children:"\u59cb\u7ec8\u9a8c\u8bc1\u5916\u90e8\u8f93\u5165\u7684JSON\u6570\u636e\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const schema = require('./schemas/input.json');\r\njsonsage.validate(input, {\r\n  schema,\r\n  strict: true\r\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u9650\u5236\u6587\u4ef6\u5927\u5c0f",children:"\u9650\u5236\u6587\u4ef6\u5927\u5c0f"}),"\n",(0,a.jsx)(n.p,{children:"\u8bbe\u7f6e\u5408\u7406\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"jsonsage.setConfig({\r\n  maxFileSize: 10 * 1024 * 1024 // 10MB\r\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6d4b\u8bd5",children:"\u6d4b\u8bd5"}),"\n",(0,a.jsx)(n.h3,{id:"\u7f16\u5199\u5168\u9762\u7684\u6d4b\u8bd5",children:"\u7f16\u5199\u5168\u9762\u7684\u6d4b\u8bd5"}),"\n",(0,a.jsx)(n.p,{children:"\u4e3a\u6bcf\u4e2a\u5173\u952e\u529f\u80fd\u7f16\u5199\u6d4b\u8bd5\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"describe('JsonSage', () => {\r\n  it('should validate complex nested objects', () => {\r\n    const result = jsonsage.validate(complexData);\r\n    expect(result.isValid).toBe(true);\r\n  });\r\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u751f\u6210\u5668",children:"\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u751f\u6210\u5668"}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u6d4b\u8bd5\u6570\u636e\u751f\u6210\u5668\u521b\u5efa\u6d4b\u8bd5\u6570\u636e\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const { generateTestData } = require('jsonsage/testing');\r\n\r\nconst testData = generateTestData({\r\n  schema: './schemas/user.json',\r\n  count: 100\r\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u7248\u672c\u63a7\u5236",children:"\u7248\u672c\u63a7\u5236"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c",children:"\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c"}),"\n",(0,a.jsx)(n.p,{children:"\u4e3aSchema\u6587\u4ef6\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:'{\r\n  "$schema": "http://json-schema.org/draft-07/schema#",\r\n  "$id": "http://example.com/schemas/user/v1.2.0",\r\n  "title": "User Schema v1.2.0"\r\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u7ef4\u62a4\u5411\u540e\u517c\u5bb9\u6027",children:"\u7ef4\u62a4\u5411\u540e\u517c\u5bb9\u6027"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u66f4\u65b0Schema\u65f6\u4fdd\u6301\u5411\u540e\u517c\u5bb9\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const jsonsage = new JsonSage({\r\n  schemaVersion: {\r\n    current: '2.0.0',\r\n    compatibility: ['1.0.0', '1.1.0']\r\n  }\r\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(96540);const a={},i=s.createContext(a);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);